<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="konva/konva.js"></script>
    <script src="圆环.js"></script>
    <script>
        window.onload = function () {
            var stage = new Konva.Stage({
                container: 'container',
                width: window.innerWidth,
                height: window.innerHeight
            });


            var x0 = stage.width() / 2;
            var y0 = stage.height() / 2;

            /*1.创建背景层*/
            var bgLayer = new Konva.Layer();

            /*创建动画层*/
            var animateGroup = new Konva.Layer();
            stage.add(animateGroup)
            /*绘制背景*/
            var innerRadius = 252 / 2;
            var outerRadius = 220;

            var innerCircle = new Konva.Circle({
                x: x0,
                y: y0,
                radius: innerRadius,
                stroke: '#ccc',
                opacity: 0.4,
                strokeWidth: 4,
                dash: [10,4] //10像素视线 4像素间隔
            });

            var outerCircle = new Konva.Circle({
                x: x0,
                y: y0,
                radius: outerRadius,
                stroke: '#ccc',
                opacity: 0.4,
                strokeWidth: 4,
                dash: [10,4] //10像素视线 4像素间隔
            });
            bgLayer.add(innerCircle);
            bgLayer.add(outerCircle);
            bgLayer.draw();
            stage.add(bgLayer);
            /*--------------------------------------------------------------*/
            var myCir = new CirText({
                x: x0,
                y: y0,
                innerRadius: 60,
                outerRadius: 85,
            });
            myCir.addToGroupOrLayer(bgLayer);

            var L2Group = new Konva.Group({
                x: x0,
                y: y0
            });
            var L3Group = new Konva.Group({
                x: x0,
                y: y0
            });

            /*2环*/
            var L2_myCir_css3 = new CirText({
                x: innerRadius * Math.cos(-60 * Math.PI / 180) ,
                y: innerRadius * Math.sin(-60 * Math.PI / 180) ,
                innerRadius: 30,
                outerRadius: 40,
                text: 'CSS 3'
            });
            L2_myCir_css3.addToGroupOrLayer(L2Group);

            var L2_myCir_h5 = new CirText({
                x: innerRadius * Math.cos(160 * Math.PI / 180) ,
                y: innerRadius * Math.sin(160 * Math.PI / 180) ,
                innerRadius: 25,
                outerRadius: 35,
                innerStyle: '#f40',
                outerStyle: 'yellowgreen',
                text: 'html 5'
            });
            L2_myCir_h5.addToGroupOrLayer(L2Group);

            /*3环*/
            var L3_myCir_h5 = new CirText({
                x: outerRadius * Math.cos(60 * Math.PI / 180) ,
                y: outerRadius * Math.sin(60 * Math.PI / 180) ,
                innerRadius: 35,
                outerRadius: 45,
                innerStyle: '#f40',
                outerStyle: 'yellowgreen',
                text: 'html 6'
            });
            L3_myCir_h5.addToGroupOrLayer(L3Group);
            animateGroup.add(L2Group);
            animateGroup.add(L3Group);
            animateGroup.draw();



            var rotateAnglePerSecond = 60;//每秒钟设置旋转60度
            //konva的帧动画系统
            var animate = new Konva.Animation(function (frame) {
                //计算 当前帧需要旋转的角度
                var rotateAngle = rotateAnglePerSecond * frame.timeDiff /1000;

                L2Group.rotate(rotateAngle);
                L3Group.rotate(- rotateAngle);
                L2Group.getChildren().each(function (item, index) {
                    item.rotate(- rotateAngle);
                })
                L3Group.getChildren().each(function (item, index) {
                    item.rotate(rotateAngle);
                })
            },animateGroup)
            animate.start();








        }
    </script>
</head>
<body>
<div id="container"></div>
</body>
</html>
